- name: Create persistent directories in /orc2_data if it does not exist
  ansible.builtin.file:
    path: "/orc2_data/{{ item }}"
    state: directory
    owner: root
    group: root
    mode: u=rwx,g=rx,o=rx
  loop:
    - jupyterhub
    - containerd
    - repo2docker
    - prometheus
    - grafana
    - alertmanager

- name: Create persistent directories in /harbor/ if it does not exist
  ansible.builtin.file:
    path: "/harbor/{{ item }}"
    state: directory
    owner: root
    group: root
    mode: u=rwx,g=rwx,o=rx
  loop:
    - jobservice
    - trivy
    - database

- name: Create persistent directories for Registry in /harbor/ if it does not exist
  ansible.builtin.file:
    path: "/harbor/registry"
    state: directory
    owner: 10000
    group: 10000
    mode: u=rwx,g=rx,o=rx

- name: Create persistent directories for Redis in /harbor/ if it does not exist
  ansible.builtin.file:
    path: "/harbor/redis"
    state: directory
    owner: 999
    group: 999
    mode: u=rwx,g=rx,o=rx

- name: Create persistent directories in /nexus/ if it does not exist
  ansible.builtin.file:
    path: "/nexus/{{ item }}"
    state: directory
    owner: root
    group: root
    mode: u=rwx,g=rx,o=rx
  loop:
    - registry
